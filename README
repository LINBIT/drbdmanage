drbdmanage installation HowTo
==============================================================================


INSTALLATION
------------------------------------------------------------------------------

Prerequisites:
    DRBD 9 installed
    LVM installed
    python-dbus, python-gobject installed
Control volume configuration steps:
    *  Install the drbdmanage package:
         rpm -i drbdmanage-0.10.1-noarch.rpm
    *  Create a VG named drbdpool
    *  Create a logical volume named .drbdctrl (in whatever VG you want) with
       a size of at least 4 MiB
    *  Configure the .drbdctrl resource for DRBD
       (the template /etc/drbd.d/drbdctrl.res_template may be helpful)
    *  Initialize the DRBD metadata for the .drbdctrl resource:
         drbdadm create-md .drbdctrl --max-peers 7
    *  Configure the control volume on all nodes:
         drbdadm adjust .drbdctrl
       On one of the nodes, initialize the control volume:
         drbdadm -- --force primary .drbdctrl
         drbdmanage init /dev/drbd0
         drbdadm secondary .drbdctrl


CONFIGURATION
------------------------------------------------------------------------------

If you want to customize the settings of your drbdmanage server, you can
change its configuration by editing the following files:
  /etc/drbdmanaged.conf
  /etc/drbdmanaged-lvm.conf


Starting the drbdmanage server (daemon)
------------------------------------------------------------------------------

The drbdmanage server should be started automatically by D-Bus when the
drbdmanage client connects to it for the first time.

The following command can be used to check whether the drbdmanage client can
connect to the drbdmanage server, and it implicitly starts the server as
described above:
  drbdmanage ping

If the server has been started successfully or had been running already,
the response of the "ping" command is simply "pong"; otherwise, an
error message is displayed.

The server can also be started manually by issuing the following command:
  dbus-drbdmanaged-service &


Configure your nodes for use with drbdmanage:
------------------------------------------------------------------------------

Steps:
    *  Create entries for all nodes managed by drbdmanage using the
       drbdmanage client:
         drbdmanage new-node node_1 ip-address-1
         [...]
         drbdmanage new-node node_n ip-address-n

The node names you enter must match the output of the "uname -n" command.


drbdmanage commands overview
------------------------------------------------------------------------------

See manual page drbdmanage(8) for information on drbdmanage commands.

